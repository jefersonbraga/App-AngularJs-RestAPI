/*
Deployment script for Escola.Database

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "Escola.Database"
:setvar DefaultFilePrefix "Escola.Database"
:setvar DefaultDataPath "C:\Users\Administrator\AppData\Local\Microsoft\VisualStudio\SSDT\Escola"
:setvar DefaultLogPath "C:\Users\Administrator\AppData\Local\Microsoft\VisualStudio\SSDT\Escola"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                CURSOR_DEFAULT LOCAL 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET PAGE_VERIFY NONE,
                DISABLE_BROKER 
            WITH ROLLBACK IMMEDIATE;
    END


GO
ALTER DATABASE [$(DatabaseName)]
    SET TARGET_RECOVERY_TIME = 0 SECONDS 
    WITH ROLLBACK IMMEDIATE;


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET QUERY_STORE (CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 367)) 
            WITH ROLLBACK IMMEDIATE;
    END


GO
PRINT N'Creating [gd_execprocs]...';


GO
CREATE ROLE [gd_execprocs]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [adm]...';


GO
CREATE SCHEMA [adm]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [escola]...';


GO
CREATE SCHEMA [escola]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [wescoladb]...';


GO
CREATE SCHEMA [wescoladb]
    AUTHORIZATION [dbo];


GO
PRINT N'Creating [adm].[AD_MUNICIPIO]...';


GO
CREATE TABLE [adm].[AD_MUNICIPIO] (
    [NU_MUNICIPIO] INT          NOT NULL,
    [NO_MUNICIPIO] VARCHAR (50) NOT NULL,
    [SG_UF]        NVARCHAR (3) NOT NULL,
    [CO_DDD]       NVARCHAR (3) NULL,
    CONSTRAINT [PK_TB002_MUNICIPIO] PRIMARY KEY NONCLUSTERED ([NU_MUNICIPIO] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [adm].[AD_UF]...';


GO
CREATE TABLE [adm].[AD_UF] (
    [SG_UF]     VARCHAR (2)  NOT NULL,
    [NO_UF]     VARCHAR (20) NOT NULL,
    [NO_REGIAO] VARCHAR (20) NULL,
    [NO_PAIS]   VARCHAR (20) NULL,
    CONSTRAINT [PK_TB001_UF] PRIMARY KEY NONCLUSTERED ([SG_UF] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [adm].[AD_ORGAOEMISSOR]...';


GO
CREATE TABLE [adm].[AD_ORGAOEMISSOR] (
    [CO_EMISSOR] VARCHAR (50) NOT NULL,
    [NO_EMISSOR] VARCHAR (70) NOT NULL,
    PRIMARY KEY CLUSTERED ([CO_EMISSOR] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [escola].[ES_LISTAATIVIDADES]...';


GO
CREATE TABLE [escola].[ES_LISTAATIVIDADES] (
    [ID]             INT            IDENTITY (1, 1) NOT NULL,
    [USUARIOID]      NVARCHAR (128) NOT NULL,
    [DESCRICAO]      VARCHAR (250)  NOT NULL,
    [STATUS]         BIT            NOT NULL,
    [DT_CRIACAO]     DATETIME       NOT NULL,
    [DT_ATUALIZACAO] DATETIME       NOT NULL,
    [DT_EXCLUSAO]    DATETIME       NULL,
    CONSTRAINT [PK_ES_LISTAATIVIDADES] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [escola].[ES_DEPENDENCIAADMINISTRATIVA]...';


GO
CREATE TABLE [escola].[ES_DEPENDENCIAADMINISTRATIVA] (
    [ID]            INT          IDENTITY (1, 1) NOT NULL,
    [DESCRICAO]     VARCHAR (50) NOT NULL,
    [DTCADASTRO]    DATETIME     NOT NULL,
    [DTATUALIZACAO] DATETIME     NOT NULL,
    [DTEXCLUSAO]    DATETIME     NULL,
    CONSTRAINT [PK_ES_DEPENDENCIAADMINISTRATIVA] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [escola].[ES_INSTITUICOES]...';


GO
CREATE TABLE [escola].[ES_INSTITUICOES] (
    [ID]            INT           NOT NULL,
    [DPADMID]       INT           NOT NULL,
    [NOME]          VARCHAR (200) NOT NULL,
    [SIGLA]         VARCHAR (10)  NOT NULL,
    [UF]            VARCHAR (2)   NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_ES_INSTITUICOES] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[__MigrationHistory]...';


GO
CREATE TABLE [dbo].[__MigrationHistory] (
    [MigrationId]    NVARCHAR (150)  NOT NULL,
    [ContextKey]     NVARCHAR (300)  NOT NULL,
    [Model]          VARBINARY (MAX) NOT NULL,
    [ProductVersion] NVARCHAR (32)   NOT NULL,
    CONSTRAINT [PK_dbo.__MigrationHistory] PRIMARY KEY CLUSTERED ([MigrationId] ASC, [ContextKey] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_ACOES]...';


GO
CREATE TABLE [dbo].[AD_ACOES] (
    [ID]       INT           IDENTITY (1, 1) NOT NULL,
    [ACOES]    VARCHAR (250) NOT NULL,
    [MODULOID] INT           NOT NULL,
    [LINK]     VARCHAR (250) NULL,
    [ICONE]    VARCHAR (50)  NULL,
    [ORDEM]    INT           NULL,
    CONSTRAINT [PK_ADMIN_ACOES] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_MENU]...';


GO
CREATE TABLE [dbo].[AD_MENU] (
    [ID]      INT           IDENTITY (1, 1) NOT NULL,
    [MENU]    VARCHAR (250) NOT NULL,
    [ACOESID] INT           NOT NULL,
    [LINK]    VARCHAR (250) NULL,
    [ORDEM]   INT           NULL,
    [ATIVO]   BIT           NULL,
    CONSTRAINT [PK_AD_MENU] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_MODULOS]...';


GO
CREATE TABLE [dbo].[AD_MODULOS] (
    [ID]     INT          IDENTITY (1, 1) NOT NULL,
    [MODULO] VARCHAR (50) NOT NULL,
    CONSTRAINT [PK_ADMIN_MODULOS] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_ORGAOS]...';


GO
CREATE TABLE [dbo].[AD_ORGAOS] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [ORGAO]         VARCHAR (250) NOT NULL,
    [IDORGAOANTIGO] INT           NULL,
    CONSTRAINT [PK_AD_ORGAOS] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_REFRESHTOKEN]...';


GO
CREATE TABLE [dbo].[AD_REFRESHTOKEN] (
    [ID]              INT            IDENTITY (1, 1) NOT NULL,
    [USERID]          NVARCHAR (128) NOT NULL,
    [HASH]            VARCHAR (50)   NOT NULL,
    [PROTECTEDTICKET] VARCHAR (MAX)  NOT NULL,
    [DTEMISSAO]       DATETIME       NOT NULL,
    [DTEMISSAOUTC]    DATETIME       NOT NULL,
    [DTEXPIRACAO]     DATETIME       NOT NULL,
    [DTEXPIRACAOUTC]  DATETIME       NOT NULL,
    CONSTRAINT [PK_AD_REFRESHTOKEN] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AD_REFRESHTOKENHISTORY]...';


GO
CREATE TABLE [dbo].[AD_REFRESHTOKENHISTORY] (
    [ID]              INT            IDENTITY (1, 1) NOT NULL,
    [IDREFRESHTOKEN]  INT            NOT NULL,
    [USERID]          NVARCHAR (128) NOT NULL,
    [HASH]            VARCHAR (50)   NOT NULL,
    [PROTECTEDTICKET] VARCHAR (MAX)  NOT NULL,
    [DTEMISSAO]       DATETIME       NOT NULL,
    [DTEMISSAOUTC]    DATETIME       NOT NULL,
    [DTEXPIRACAO]     DATETIME       NOT NULL,
    [DTEXPIRACAOUTC]  DATETIME       NOT NULL,
    PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetRoles]...';


GO
CREATE TABLE [dbo].[AspNetRoles] (
    [Id]   NVARCHAR (128) NOT NULL,
    [Name] NVARCHAR (256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetRoles] PRIMARY KEY CLUSTERED ([Id] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetRoles].[RoleNameIndex]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [RoleNameIndex]
    ON [dbo].[AspNetRoles]([Name] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserClaims]...';


GO
CREATE TABLE [dbo].[AspNetUserClaims] (
    [Id]         INT            IDENTITY (1, 1) NOT NULL,
    [UserId]     NVARCHAR (128) NOT NULL,
    [ClaimType]  NVARCHAR (MAX) NULL,
    [ClaimValue] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.AspNetUserClaims] PRIMARY KEY CLUSTERED ([Id] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserClaims].[IX_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserId]
    ON [dbo].[AspNetUserClaims]([UserId] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserLogins]...';


GO
CREATE TABLE [dbo].[AspNetUserLogins] (
    [LoginProvider] NVARCHAR (128) NOT NULL,
    [ProviderKey]   NVARCHAR (128) NOT NULL,
    [UserId]        NVARCHAR (128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserLogins] PRIMARY KEY CLUSTERED ([LoginProvider] ASC, [ProviderKey] ASC, [UserId] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserLogins].[IX_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserId]
    ON [dbo].[AspNetUserLogins]([UserId] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserRoles]...';


GO
CREATE TABLE [dbo].[AspNetUserRoles] (
    [UserId] NVARCHAR (128) NOT NULL,
    [RoleId] NVARCHAR (128) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUserRoles] PRIMARY KEY CLUSTERED ([UserId] ASC, [RoleId] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserRoles].[IX_RoleId]...';


GO
CREATE NONCLUSTERED INDEX [IX_RoleId]
    ON [dbo].[AspNetUserRoles]([RoleId] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUserRoles].[IX_UserId]...';


GO
CREATE NONCLUSTERED INDEX [IX_UserId]
    ON [dbo].[AspNetUserRoles]([UserId] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUsers]...';


GO
CREATE TABLE [dbo].[AspNetUsers] (
    [Id]                   NVARCHAR (128) NOT NULL,
    [Email]                NVARCHAR (256) NULL,
    [EmailConfirmed]       BIT            NOT NULL,
    [PasswordHash]         NVARCHAR (MAX) NULL,
    [SecurityStamp]        NVARCHAR (MAX) NULL,
    [PhoneNumber]          NVARCHAR (MAX) NULL,
    [PhoneNumberConfirmed] BIT            NOT NULL,
    [TwoFactorEnabled]     BIT            NOT NULL,
    [LockoutEndDateUtc]    DATETIME       NULL,
    [LockoutEnabled]       BIT            NOT NULL,
    [AccessFailedCount]    INT            NOT NULL,
    [UserName]             NVARCHAR (256) NOT NULL,
    CONSTRAINT [PK_dbo.AspNetUsers] PRIMARY KEY CLUSTERED ([Id] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[AspNetUsers].[UserNameIndex]...';


GO
CREATE UNIQUE NONCLUSTERED INDEX [UserNameIndex]
    ON [dbo].[AspNetUsers]([UserName] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_AVALIACAO]...';


GO
CREATE TABLE [dbo].[EV_AVALIACAO] (
    [ID]          INT           IDENTITY (1, 1) NOT NULL,
    [TITULO]      VARCHAR (250) NOT NULL,
    [DESCRICAO]   VARCHAR (MAX) NULL,
    [EVENTOID]    INT           NOT NULL,
    [DISPONIVEL]  VARCHAR (5)   NULL,
    [DTINICIO]    DATETIME      NULL,
    [HORAINICIO]  TIME (7)      NULL,
    [DTTERMINO]   DATETIME      NULL,
    [HORATERMINO] TIME (7)      NULL,
    [DTCADASTRO]  DATETIME      NOT NULL,
    [DTALTERACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]  DATETIME      NULL,
    CONSTRAINT [PK_EV_AVALIACAO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_AVALIACAOOBSERVACAO]...';


GO
CREATE TABLE [dbo].[EV_AVALIACAOOBSERVACAO] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [AVALIACAOID]   INT           NOT NULL,
    [CLIENTEID]     INT           NOT NULL,
    [OBSERVACAO]    VARCHAR (MAX) NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_EV_AVALIACAOOBSERVACAO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_AVALIACAOPERGUNTA]...';


GO
CREATE TABLE [dbo].[EV_AVALIACAOPERGUNTA] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [AVALIACAOID]   INT           NOT NULL,
    [TITULO]        VARCHAR (100) NOT NULL,
    [ORDEM]         INT           NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_Table_1] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_CLIENTE]...';


GO
CREATE TABLE [dbo].[EV_CLIENTE] (
    [ID]                   INT            IDENTITY (1, 1) NOT NULL,
    [USERID]               NVARCHAR (128) NOT NULL,
    [NOME]                 VARCHAR (250)  NULL,
    [EMAIL]                VARCHAR (50)   NULL,
    [RG]                   VARCHAR (50)   NULL,
    [ORGAOEMISSOR]         VARCHAR (50)   NULL,
    [UFEMISSOR]            VARCHAR (5)    NULL,
    [DTEMISSAO]            DATETIME       NOT NULL,
    [CPF]                  VARCHAR (50)   NULL,
    [NACIONALIDADE]        VARCHAR (50)   NULL,
    [NATURALIDADE]         VARCHAR (50)   NULL,
    [DTNASCIMENTO]         DATETIME       NULL,
    [SEXO]                 VARCHAR (50)   NULL,
    [NOMEPAI]              VARCHAR (250)  NULL,
    [NOMEMAE]              VARCHAR (250)  NULL,
    [CEP]                  VARCHAR (50)   NULL,
    [ENDERECO]             VARCHAR (250)  NULL,
    [BAIRRO]               VARCHAR (250)  NULL,
    [NUMERO]               INT            NULL,
    [COMPLEMENTO]          VARCHAR (250)  NULL,
    [CIDADE]               VARCHAR (250)  NULL,
    [ESTADO]               VARCHAR (5)    NULL,
    [TEL_RESIDENCIAL]      VARCHAR (50)   NULL,
    [TEL_COMERCIAL]        VARCHAR (50)   NULL,
    [TEL_CELULAR]          VARCHAR (50)   NULL,
    [SENHA]                VARCHAR (250)  NULL,
    [CAD_ADMINISTRACAO]    VARCHAR (10)   NULL,
    [ENVIO_SENHA]          VARCHAR (5)    NULL,
    [ORGAOTRABALHOID]      INT            NULL,
    [ESCOLARIDADEID]       INT            NULL,
    [INSTITUICAO]          VARCHAR (250)  NULL,
    [DTCONCLUSAO]          DATETIME       NULL,
    [DTCADASTRO]           DATETIME       NULL,
    [DTALTERACAO]          DATETIME       NULL,
    [DTULTIMOACESSO]       DATETIME       NULL,
    [IDANTIGO]             BIGINT         NULL,
    [IDORGAOANTIGO]        INT            NULL,
    [IDESCOLARIDADEANTIGO] INT            NULL,
    [QTDACESSO]            INT            NULL,
    [RECEBERFEEDS]         INT            NULL,
    [DTEXCLUSAO]           DATETIME       NULL,
    CONSTRAINT [PK_EV_CLIENTE] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_CLIENTE].[NonClusteredIndex-20171012-191301]...';


GO
CREATE NONCLUSTERED INDEX [NonClusteredIndex-20171012-191301]
    ON [dbo].[EV_CLIENTE]([IDANTIGO] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_CLIENTE].[NonClusteredIndex-20171019-223308]...';


GO
CREATE NONCLUSTERED INDEX [NonClusteredIndex-20171019-223308]
    ON [dbo].[EV_CLIENTE]([NOME] ASC, [EMAIL] ASC, [RG] ASC, [CPF] ASC, [SEXO] ASC, [CIDADE] ASC, [ESTADO] ASC, [TEL_CELULAR] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_CONTROLENECESSIDADE]...';


GO
CREATE TABLE [dbo].[EV_CONTROLENECESSIDADE] (
    [ID]            INT IDENTITY (1, 1) NOT NULL,
    [INCRICAOID]    INT NULL,
    [CLIENTEID]     INT NULL,
    [NECESSIDADEID] INT NULL,
    CONSTRAINT [PK_EV_CONTROLENECESSIDADE] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_DIVULGACAO]...';


GO
CREATE TABLE [dbo].[EV_DIVULGACAO] (
    [ID]          INT           IDENTITY (1, 1) NOT NULL,
    [TITULO]      VARCHAR (250) NOT NULL,
    [MENSAGEM]    VARCHAR (MAX) NOT NULL,
    [DTCRIACAO]   DATETIME      NOT NULL,
    [DTALTERACAO] DATETIME      NOT NULL,
    CONSTRAINT [PK_EV_DIVULGACAO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_DIVULGACAOENVIOS]...';


GO
CREATE TABLE [dbo].[EV_DIVULGACAOENVIOS] (
    [ID]              INT          IDENTITY (1, 1) NOT NULL,
    [IDDIVULGACAO]    INT          NOT NULL,
    [IDEVENTO]        INT          NULL,
    [IDORGAOTRABALHO] INT          NULL,
    [DSLETRAALFABETO] VARCHAR (1)  NULL,
    [EMAILTESTE]      VARCHAR (50) NULL,
    [EMAILREMETENTE]  VARCHAR (50) NOT NULL,
    [ASSUNTO]         VARCHAR (50) NULL,
    [DTCADASTRO]      DATETIME     NOT NULL,
    [DTALTERACAO]     DATETIME     NOT NULL,
    [DTEXCLUSAO]      DATETIME     NULL,
    CONSTRAINT [PK_EV_DIVULGACAOENVIOS] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_ESCOLARIDADE]...';


GO
CREATE TABLE [dbo].[EV_ESCOLARIDADE] (
    [ID]                   INT          IDENTITY (1, 1) NOT NULL,
    [ESCOLARIDADE]         VARCHAR (50) NOT NULL,
    [IDESCOLARIDADEANTIGO] INT          NOT NULL,
    CONSTRAINT [PK_EV_ESCOLARIDADE] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_EVENTO]...';


GO
CREATE TABLE [dbo].[EV_EVENTO] (
    [ID]                  INT           IDENTITY (1, 1) NOT NULL,
    [NOME]                VARCHAR (250) NOT NULL,
    [LOCALID]             INT           NULL,
    [TP_EVENTO]           VARCHAR (50)  NULL,
    [SITUACAO]            VARCHAR (50)  NULL,
    [DISPONIVEL]          VARCHAR (50)  NULL,
    [EXIBIRLOCAL]         VARCHAR (50)  NULL,
    [INSCRICAO]           VARCHAR (50)  NULL,
    [TEMAID]              INT           NULL,
    [VALOREVENTO]         MONEY         NOT NULL,
    [QTDVAGAS]            INT           NULL,
    [FREQUENCIA]          DECIMAL (18)  NULL,
    [DTINICIO]            DATETIME      NULL,
    [DTTERMINO]           DATETIME      NULL,
    [HORAINICIO]          TIME (7)      NULL,
    [HORATERMINO]         TIME (7)      NULL,
    [ENDERECO]            VARCHAR (MAX) NULL,
    [VECIMENTOBOLETO]     DATETIME      NULL,
    [DESCRICAO]           VARCHAR (MAX) NULL,
    [MENSAGEMBOLETO]      VARCHAR (MAX) NULL,
    [MENSAGEMCOMPROVANTE] VARCHAR (MAX) NULL,
    [IDANTIGO]            INT           NULL,
    [DTCADASTRO]          DATETIME      NOT NULL,
    [DTATUALIZACAO]       DATETIME      NOT NULL,
    [DTEXCLUSAO]          DATETIME      NULL,
    CONSTRAINT [PK_EV_EVENTO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_EVENTO].[NonClusteredIndex-20171012-191351]...';


GO
CREATE NONCLUSTERED INDEX [NonClusteredIndex-20171012-191351]
    ON [dbo].[EV_EVENTO]([IDANTIGO] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_EVENTODATAS]...';


GO
CREATE TABLE [dbo].[EV_EVENTODATAS] (
    [ID]          INT      IDENTITY (1, 1) NOT NULL,
    [IDEVENTO]    INT      NOT NULL,
    [DTINICIO]    DATETIME NOT NULL,
    [DTTERMINO]   DATETIME NOT NULL,
    [HORAINICIO]  TIME (7) NOT NULL,
    [HORATERMINO] TIME (7) NOT NULL,
    CONSTRAINT [PK_EV_EVENTODATAS] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_EVENTOTURNOS]...';


GO
CREATE TABLE [dbo].[EV_EVENTOTURNOS] (
    [IDEVENTO]      INT      NOT NULL,
    [IDTURNO]       INT      NOT NULL,
    [DTCADASTRO]    DATETIME NOT NULL,
    [DTATUALIZACAO] DATETIME NOT NULL,
    [DTEXCLUSAO]    DATETIME NULL,
    CONSTRAINT [PK_EV_EVENTOTURNOS] PRIMARY KEY CLUSTERED ([IDEVENTO] ASC, [IDTURNO] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_EVENTOTURNOS].[NonClusteredIndex-20171029-024719]...';


GO
CREATE NONCLUSTERED INDEX [NonClusteredIndex-20171029-024719]
    ON [dbo].[EV_EVENTOTURNOS]([IDEVENTO] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_GRUPODEQUESTOES]...';


GO
CREATE TABLE [dbo].[EV_GRUPODEQUESTOES] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [RECURSOID]     INT           NOT NULL,
    [DESCRICAO]     VARCHAR (100) NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_EV_GRUPODEQUESTOES] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_INSCRICAO]...';


GO
CREATE TABLE [dbo].[EV_INSCRICAO] (
    [ID]              INT           IDENTITY (1, 1) NOT NULL,
    [CLIENTEID]       INT           NOT NULL,
    [EVENTOID]        INT           NOT NULL,
    [NEESPECIALID]    INT           NULL,
    [DTINSCRICAO]     DATETIME      NOT NULL,
    [VALOR]           MONEY         NOT NULL,
    [FORMAPAGAMENTO]  VARCHAR (50)  NULL,
    [PAGO]            VARCHAR (50)  NULL,
    [DTBOLETOEMITIDO] DATETIME      NULL,
    [BOLETOEMITIDO]   VARCHAR (50)  NULL,
    [DATAPAGAMENTO]   DATETIME      NULL,
    [VALORRECEBIDO]   MONEY         NULL,
    [TURNO]           VARCHAR (50)  NULL,
    [CARGO]           VARCHAR (250) NULL,
    [SALA]            VARCHAR (50)  NULL,
    [FASE01]          VARCHAR (50)  NULL,
    [FASE02]          VARCHAR (50)  NULL,
    [FASE03]          VARCHAR (50)  NULL,
    [FASE04]          VARCHAR (50)  NULL,
    [LOCALPROVAID]    INT           NULL,
    [SALAID]          INT           NULL,
    [BAIXA]           VARCHAR (50)  NULL,
    [CRIADO]          DATETIME      NULL,
    [DTCADASTRO]      DATETIME      NOT NULL,
    [DTALTERACAO]     DATETIME      NOT NULL,
    [DTEXCLUSAO]      DATETIME      NULL,
    CONSTRAINT [PK_EV_INSCRICAO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_INSCRICAO].[NonClusteredIndex-20171016-020530]...';


GO
CREATE NONCLUSTERED INDEX [NonClusteredIndex-20171016-020530]
    ON [dbo].[EV_INSCRICAO]([CRIADO] ASC)
    ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_LOCALEVENTO]...';


GO
CREATE TABLE [dbo].[EV_LOCALEVENTO] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [DESCRICAO]     VARCHAR (200) NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_EV_LOCALEVENTO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_LOCALPROVA]...';


GO
CREATE TABLE [dbo].[EV_LOCALPROVA] (
    [ID]          INT           IDENTITY (1, 1) NOT NULL,
    [LOCAL]       VARCHAR (255) NOT NULL,
    [CEP]         VARCHAR (50)  NOT NULL,
    [LOGRADOURO]  VARCHAR (250) NOT NULL,
    [ENDERECO]    VARCHAR (250) NOT NULL,
    [BAIRRO]      VARCHAR (250) NOT NULL,
    [COMPLEMENTO] VARCHAR (250) NULL,
    [NUMERO]      INT           NULL,
    [CIDADE]      VARCHAR (250) NOT NULL,
    [ESTADO]      VARCHAR (2)   NOT NULL,
    CONSTRAINT [PK_EV_LOCALPROVA] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_NECESSIDADE]...';


GO
CREATE TABLE [dbo].[EV_NECESSIDADE] (
    [ID]                INT           NOT NULL,
    [NECESSIDADE]       VARCHAR (250) NULL,
    [TIPONECESSIDADEID] INT           NULL,
    [DTCADASTRO]        DATETIME      NOT NULL,
    [DTATUALIZACAO]     DATETIME      NOT NULL,
    [DTEXCLUSAO]        DATETIME      NULL,
    CONSTRAINT [PK_EV_NECESSIDADE] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_PROVAQUESTOES]...';


GO
CREATE TABLE [dbo].[EV_PROVAQUESTOES] (
    [ID]              INT           IDENTITY (1, 1) NOT NULL,
    [GRUPOQUESTOESID] INT           NOT NULL,
    [DESCRICAO]       VARCHAR (100) NOT NULL,
    [DTCADASTRO]      DATETIME      NOT NULL,
    [DTATUALIZACAO]   DATETIME      NOT NULL,
    [DTEXCLUSAO]      DATETIME      NOT NULL,
    CONSTRAINT [PK_EV_PROVAQUESTOES] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_QUESTOESCORRECAO]...';


GO
CREATE TABLE [dbo].[EV_QUESTOESCORRECAO] (
    [ID]              INT      NOT NULL,
    [GRUPOQUESTOESID] INT      NOT NULL,
    [DESCRICAO]       INT      NOT NULL,
    [DTCADASTRO]      DATETIME NOT NULL,
    [DTATUALIZACAO]   DATETIME NOT NULL,
    [DTEXCLUSAO]      DATETIME NULL,
    CONSTRAINT [PK_EV_QUESTOESCORRECAO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_RECURSOPROVA]...';


GO
CREATE TABLE [dbo].[EV_RECURSOPROVA] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [EVENTOID]      INT           NOT NULL,
    [TITULO]        VARCHAR (100) NOT NULL,
    [INSTRUCOES]    VARCHAR (MAX) NULL,
    [DTINICIO]      DATETIME      NOT NULL,
    [HRINICIO]      TIME (7)      NULL,
    [DTTERMINO]     DATETIME      NOT NULL,
    [HRTERMINO]     TIME (7)      NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_EV_RECURSOPROVA] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_SALALOCALPROVA]...';


GO
CREATE TABLE [dbo].[EV_SALALOCALPROVA] (
    [ID]           INT           IDENTITY (1, 1) NOT NULL,
    [SALA]         VARCHAR (250) NULL,
    [LOCALPROVAID] INT           NULL,
    CONSTRAINT [PK_EV_SALALOCALPROVA] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_SITUACAOEVENTO]...';


GO
CREATE TABLE [dbo].[EV_SITUACAOEVENTO] (
    [ID]            INT          IDENTITY (1, 1) NOT NULL,
    [DESCRICAO]     VARCHAR (50) NOT NULL,
    [DTCADASTRO]    DATETIME     NOT NULL,
    [DTATUALIZACAO] DATETIME     NOT NULL,
    [DTEXCLUSAO]    DATETIME     NULL,
    CONSTRAINT [PK_EV_SITUACAOEVENTO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_TEMA]...';


GO
CREATE TABLE [dbo].[EV_TEMA] (
    [ID]            INT           IDENTITY (1, 1) NOT NULL,
    [TEMA]          VARCHAR (255) NOT NULL,
    [DTCADASTRO]    DATETIME      NOT NULL,
    [DTATUALIZACAO] DATETIME      NOT NULL,
    [DTEXCLUSAO]    DATETIME      NULL,
    CONSTRAINT [PK_EV_TEMA] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_TIPOEVENTO]...';


GO
CREATE TABLE [dbo].[EV_TIPOEVENTO] (
    [ID]          INT          IDENTITY (1, 1) NOT NULL,
    [DESCRICAO]   VARCHAR (50) NOT NULL,
    [DTALTERACAO] DATETIME     NOT NULL,
    [DTCADASTRO]  DATETIME     NOT NULL,
    [DTEXCLUSAO]  DATETIME     NULL,
    CONSTRAINT [PK_EV_TIPOEVENTO] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [dbo].[EV_TPNECESSIDADE]...';


GO
CREATE TABLE [dbo].[EV_TPNECESSIDADE] (
    [ID]              INT           NOT NULL,
    [TIPONECESSIDADE] VARCHAR (250) NOT NULL,
    [DTCADASTRO]      DATETIME      NOT NULL,
    [DTATUALIZACAO]   DATETIME      NOT NULL,
    [DTEXCLUSAO]      DATETIME      NULL,
    CONSTRAINT [PK_EV_TPNECESSIDADE] PRIMARY KEY CLUSTERED ([ID] ASC) ON [PRIMARY]
) ON [PRIMARY];


GO
PRINT N'Creating [escola].[DF_ES_DEPENDENCIAADMINISTRATIVA_DTATUALIZACAO]...';


GO
ALTER TABLE [escola].[ES_DEPENDENCIAADMINISTRATIVA]
    ADD CONSTRAINT [DF_ES_DEPENDENCIAADMINISTRATIVA_DTATUALIZACAO] DEFAULT (getdate()) FOR [DTATUALIZACAO];


GO
PRINT N'Creating [escola].[DF_ES_DEPENDENCIAADMINISTRATIVA_DTCADASTRO]...';


GO
ALTER TABLE [escola].[ES_DEPENDENCIAADMINISTRATIVA]
    ADD CONSTRAINT [DF_ES_DEPENDENCIAADMINISTRATIVA_DTCADASTRO] DEFAULT (getdate()) FOR [DTCADASTRO];


GO
PRINT N'Creating [dbo].[DF_AD_REFRESHTOKEN_DTEMISSAO]...';


GO
ALTER TABLE [dbo].[AD_REFRESHTOKEN]
    ADD CONSTRAINT [DF_AD_REFRESHTOKEN_DTEMISSAO] DEFAULT (getdate()) FOR [DTEMISSAO];


GO
PRINT N'Creating [dbo].[DF_EV_LOCALEVENTO_DTATUALIZACAO]...';


GO
ALTER TABLE [dbo].[EV_LOCALEVENTO]
    ADD CONSTRAINT [DF_EV_LOCALEVENTO_DTATUALIZACAO] DEFAULT (getdate()) FOR [DTATUALIZACAO];


GO
PRINT N'Creating [dbo].[DF_EV_LOCALEVENTO_DTCADASTRO]...';


GO
ALTER TABLE [dbo].[EV_LOCALEVENTO]
    ADD CONSTRAINT [DF_EV_LOCALEVENTO_DTCADASTRO] DEFAULT (getdate()) FOR [DTCADASTRO];


GO
PRINT N'Creating [dbo].[DF_EV_SITUACAOEVENTO_DTATUALIZACAO]...';


GO
ALTER TABLE [dbo].[EV_SITUACAOEVENTO]
    ADD CONSTRAINT [DF_EV_SITUACAOEVENTO_DTATUALIZACAO] DEFAULT (getdate()) FOR [DTATUALIZACAO];


GO
PRINT N'Creating [dbo].[DF_EV_SITUACAOEVENTO_DTCADASTRO]...';


GO
ALTER TABLE [dbo].[EV_SITUACAOEVENTO]
    ADD CONSTRAINT [DF_EV_SITUACAOEVENTO_DTCADASTRO] DEFAULT (getdate()) FOR [DTCADASTRO];


GO
PRINT N'Creating [dbo].[DF_EV_TIPOEVENTO_DTCADASTRO]...';


GO
ALTER TABLE [dbo].[EV_TIPOEVENTO]
    ADD CONSTRAINT [DF_EV_TIPOEVENTO_DTCADASTRO] DEFAULT (getdate()) FOR [DTCADASTRO];


GO
PRINT N'Creating [dbo].[DF_EV_TIPOEVENTO_DTALTERACAO]...';


GO
ALTER TABLE [dbo].[EV_TIPOEVENTO]
    ADD CONSTRAINT [DF_EV_TIPOEVENTO_DTALTERACAO] DEFAULT (getdate()) FOR [DTALTERACAO];


GO
PRINT N'Creating [escola].[FK_ES_LISTAATIVIDADES_AspNetUsers]...';


GO
ALTER TABLE [escola].[ES_LISTAATIVIDADES] WITH NOCHECK
    ADD CONSTRAINT [FK_ES_LISTAATIVIDADES_AspNetUsers] FOREIGN KEY ([USUARIOID]) REFERENCES [dbo].[AspNetUsers] ([Id]);


GO
PRINT N'Creating [escola].[FK_ES_INSTITUICOES_ES_INSTITUICOES]...';


GO
ALTER TABLE [escola].[ES_INSTITUICOES] WITH NOCHECK
    ADD CONSTRAINT [FK_ES_INSTITUICOES_ES_INSTITUICOES] FOREIGN KEY ([DPADMID]) REFERENCES [escola].[ES_DEPENDENCIAADMINISTRATIVA] ([ID]);


GO
PRINT N'Creating [dbo].[FK_AD_ACOES_AD_MODULOS]...';


GO
ALTER TABLE [dbo].[AD_ACOES] WITH NOCHECK
    ADD CONSTRAINT [FK_AD_ACOES_AD_MODULOS] FOREIGN KEY ([MODULOID]) REFERENCES [dbo].[AD_MODULOS] ([ID]);


GO
PRINT N'Creating [dbo].[FK_AD_MENU_AD_ACOES]...';


GO
ALTER TABLE [dbo].[AD_MENU] WITH NOCHECK
    ADD CONSTRAINT [FK_AD_MENU_AD_ACOES] FOREIGN KEY ([ACOESID]) REFERENCES [dbo].[AD_ACOES] ([ID]);


GO
PRINT N'Creating [dbo].[FK_AD_REFRESHTOKEN_AD_REFRESHTOKEN]...';


GO
ALTER TABLE [dbo].[AD_REFRESHTOKEN] WITH NOCHECK
    ADD CONSTRAINT [FK_AD_REFRESHTOKEN_AD_REFRESHTOKEN] FOREIGN KEY ([USERID]) REFERENCES [dbo].[AspNetUsers] ([Id]);


GO
PRINT N'Creating [dbo].[FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId]...';


GO
ALTER TABLE [dbo].[AspNetUserClaims] WITH NOCHECK
    ADD CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE;


GO
PRINT N'Creating [dbo].[FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId]...';


GO
ALTER TABLE [dbo].[AspNetUserLogins] WITH NOCHECK
    ADD CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE;


GO
PRINT N'Creating [dbo].[FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId]...';


GO
ALTER TABLE [dbo].[AspNetUserRoles] WITH NOCHECK
    ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId] FOREIGN KEY ([UserId]) REFERENCES [dbo].[AspNetUsers] ([Id]) ON DELETE CASCADE;


GO
PRINT N'Creating [dbo].[FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId]...';


GO
ALTER TABLE [dbo].[AspNetUserRoles] WITH NOCHECK
    ADD CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [dbo].[AspNetRoles] ([Id]) ON DELETE CASCADE;


GO
PRINT N'Creating [dbo].[FK_EV_AVALIACAO_EV_EVENTO]...';


GO
ALTER TABLE [dbo].[EV_AVALIACAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_AVALIACAO_EV_EVENTO] FOREIGN KEY ([EVENTOID]) REFERENCES [dbo].[EV_EVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_AVALIACAOOBSERVACAO_EV_CLIENTE]...';


GO
ALTER TABLE [dbo].[EV_AVALIACAOOBSERVACAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_AVALIACAOOBSERVACAO_EV_CLIENTE] FOREIGN KEY ([CLIENTEID]) REFERENCES [dbo].[EV_CLIENTE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_AVALIACAOOBSERVACAO_EV_AVALIACAO]...';


GO
ALTER TABLE [dbo].[EV_AVALIACAOOBSERVACAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_AVALIACAOOBSERVACAO_EV_AVALIACAO] FOREIGN KEY ([AVALIACAOID]) REFERENCES [dbo].[EV_AVALIACAO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_CLIENTE_EV_ESCOLARIDADE]...';


GO
ALTER TABLE [dbo].[EV_CLIENTE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CLIENTE_EV_ESCOLARIDADE] FOREIGN KEY ([ESCOLARIDADEID]) REFERENCES [dbo].[EV_ESCOLARIDADE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_CLIENTE_AspNetUsers]...';


GO
ALTER TABLE [dbo].[EV_CLIENTE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CLIENTE_AspNetUsers] FOREIGN KEY ([USERID]) REFERENCES [dbo].[AspNetUsers] ([Id]);


GO
PRINT N'Creating [dbo].[FK_EV_CLIENTE_AD_ORGAOS]...';


GO
ALTER TABLE [dbo].[EV_CLIENTE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CLIENTE_AD_ORGAOS] FOREIGN KEY ([ORGAOTRABALHOID]) REFERENCES [dbo].[AD_ORGAOS] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_CONTROLENECESSIDADE_EV_NECESSIDADE]...';


GO
ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_NECESSIDADE] FOREIGN KEY ([NECESSIDADEID]) REFERENCES [dbo].[EV_NECESSIDADE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_CONTROLENECESSIDADE_EV_INSCRICAO]...';


GO
ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_INSCRICAO] FOREIGN KEY ([INCRICAOID]) REFERENCES [dbo].[EV_INSCRICAO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_CONTROLENECESSIDADE_EV_CLIENTE]...';


GO
ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_CLIENTE] FOREIGN KEY ([CLIENTEID]) REFERENCES [dbo].[EV_CLIENTE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_DIVULGACAOENVIOS_EV_EVENTO]...';


GO
ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_DIVULGACAOENVIOS_EV_EVENTO] FOREIGN KEY ([IDEVENTO]) REFERENCES [dbo].[EV_EVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_DIVULGACAOENVIOS_EV_DIVULGACAO]...';


GO
ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_DIVULGACAOENVIOS_EV_DIVULGACAO] FOREIGN KEY ([IDDIVULGACAO]) REFERENCES [dbo].[EV_DIVULGACAO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_DIVULGACAOENVIOS_AD_ORGAOS]...';


GO
ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_DIVULGACAOENVIOS_AD_ORGAOS] FOREIGN KEY ([IDORGAOTRABALHO]) REFERENCES [dbo].[AD_ORGAOS] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_EVENTO_EV_TEMA]...';


GO
ALTER TABLE [dbo].[EV_EVENTO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_EVENTO_EV_TEMA] FOREIGN KEY ([TEMAID]) REFERENCES [dbo].[EV_TEMA] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_EVENTO_EV_LOCALEVENTO]...';


GO
ALTER TABLE [dbo].[EV_EVENTO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_EVENTO_EV_LOCALEVENTO] FOREIGN KEY ([LOCALID]) REFERENCES [dbo].[EV_LOCALEVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_EVENTODATAS_EV_EVENTO]...';


GO
ALTER TABLE [dbo].[EV_EVENTODATAS] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_EVENTODATAS_EV_EVENTO] FOREIGN KEY ([IDEVENTO]) REFERENCES [dbo].[EV_EVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_GRUPODEQUESTOES_EV_RECURSOPROVA]...';


GO
ALTER TABLE [dbo].[EV_GRUPODEQUESTOES] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_GRUPODEQUESTOES_EV_RECURSOPROVA] FOREIGN KEY ([RECURSOID]) REFERENCES [dbo].[EV_RECURSOPROVA] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_INSCRICAO_EV_EVENTO]...';


GO
ALTER TABLE [dbo].[EV_INSCRICAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_INSCRICAO_EV_EVENTO] FOREIGN KEY ([EVENTOID]) REFERENCES [dbo].[EV_EVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_INSCRICAO_EV_CLIENTE]...';


GO
ALTER TABLE [dbo].[EV_INSCRICAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_INSCRICAO_EV_CLIENTE] FOREIGN KEY ([CLIENTEID]) REFERENCES [dbo].[EV_CLIENTE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_NECESSIDADE_EV_TPNECESSIDADE]...';


GO
ALTER TABLE [dbo].[EV_NECESSIDADE] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_NECESSIDADE_EV_TPNECESSIDADE] FOREIGN KEY ([TIPONECESSIDADEID]) REFERENCES [dbo].[EV_TPNECESSIDADE] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_PROVAQUESTOES_EV_GRUPODEQUESTOES]...';


GO
ALTER TABLE [dbo].[EV_PROVAQUESTOES] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_PROVAQUESTOES_EV_GRUPODEQUESTOES] FOREIGN KEY ([GRUPOQUESTOESID]) REFERENCES [dbo].[EV_GRUPODEQUESTOES] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_QUESTOESCORRECAO_EV_GRUPODEQUESTOES]...';


GO
ALTER TABLE [dbo].[EV_QUESTOESCORRECAO] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_QUESTOESCORRECAO_EV_GRUPODEQUESTOES] FOREIGN KEY ([GRUPOQUESTOESID]) REFERENCES [dbo].[EV_GRUPODEQUESTOES] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_RECURSOPROVA_EV_RECURSOPROVA]...';


GO
ALTER TABLE [dbo].[EV_RECURSOPROVA] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_RECURSOPROVA_EV_RECURSOPROVA] FOREIGN KEY ([EVENTOID]) REFERENCES [dbo].[EV_EVENTO] ([ID]);


GO
PRINT N'Creating [dbo].[FK_EV_SALALOCALPROVA_EV_LOCALPROVA]...';


GO
ALTER TABLE [dbo].[EV_SALALOCALPROVA] WITH NOCHECK
    ADD CONSTRAINT [FK_EV_SALALOCALPROVA_EV_LOCALPROVA] FOREIGN KEY ([LOCALPROVAID]) REFERENCES [dbo].[EV_LOCALPROVA] ([ID]);


GO
PRINT N'Creating [dbo].[RefreshTokenHistory]...';


GO
-- =============================================
-- Author:		<Author,,Name>
-- Create date: <Create Date,,>
-- Description:	<Description,,>
-- =============================================
CREATE TRIGGER RefreshTokenHistory 
   ON  dbo.AD_REFRESHTOKEN
   AFTER DELETE 
AS 
BEGIN
	-- SET NOCOUNT ON added to prevent extra result sets from
	-- interfering with SELECT statements.
	SET NOCOUNT ON;
    INSERT INTO [dbo].[AD_REFRESHTOKENHISTORY]
           ([IDREFRESHTOKEN]
           ,[USERID]
           ,[HASH]
           ,[PROTECTEDTICKET]
           ,[DTEMISSAO]
           ,[DTEMISSAOUTC]
           ,[DTEXPIRACAO]
           ,[DTEXPIRACAOUTC])
		SELECT [ID]
		  ,[USERID]
		  ,[HASH]
		  ,[PROTECTEDTICKET]
		  ,[DTEMISSAO]
		  ,[DTEMISSAOUTC]
		  ,[DTEXPIRACAO]
		  ,[DTEXPIRACAOUTC] FROM DELETED
END
GO
PRINT N'Creating [escola].[ES_INSTITUICOES].[MS_Description]...';


GO
EXECUTE sp_addextendedproperty @name = N'MS_Description', @value = N'INSTITUICOES UNIVERSIDADES E ESCOLAS', @level0type = N'SCHEMA', @level0name = N'escola', @level1type = N'TABLE', @level1name = N'ES_INSTITUICOES';


GO
PRINT N'Checking existing data against newly created constraints';


GO
USE [$(DatabaseName)];


GO
ALTER TABLE [escola].[ES_LISTAATIVIDADES] WITH CHECK CHECK CONSTRAINT [FK_ES_LISTAATIVIDADES_AspNetUsers];

ALTER TABLE [escola].[ES_INSTITUICOES] WITH CHECK CHECK CONSTRAINT [FK_ES_INSTITUICOES_ES_INSTITUICOES];

ALTER TABLE [dbo].[AD_ACOES] WITH CHECK CHECK CONSTRAINT [FK_AD_ACOES_AD_MODULOS];

ALTER TABLE [dbo].[AD_MENU] WITH CHECK CHECK CONSTRAINT [FK_AD_MENU_AD_ACOES];

ALTER TABLE [dbo].[AD_REFRESHTOKEN] WITH CHECK CHECK CONSTRAINT [FK_AD_REFRESHTOKEN_AD_REFRESHTOKEN];

ALTER TABLE [dbo].[AspNetUserClaims] WITH CHECK CHECK CONSTRAINT [FK_dbo.AspNetUserClaims_dbo.AspNetUsers_UserId];

ALTER TABLE [dbo].[AspNetUserLogins] WITH CHECK CHECK CONSTRAINT [FK_dbo.AspNetUserLogins_dbo.AspNetUsers_UserId];

ALTER TABLE [dbo].[AspNetUserRoles] WITH CHECK CHECK CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetUsers_UserId];

ALTER TABLE [dbo].[AspNetUserRoles] WITH CHECK CHECK CONSTRAINT [FK_dbo.AspNetUserRoles_dbo.AspNetRoles_RoleId];

ALTER TABLE [dbo].[EV_AVALIACAO] WITH CHECK CHECK CONSTRAINT [FK_EV_AVALIACAO_EV_EVENTO];

ALTER TABLE [dbo].[EV_AVALIACAOOBSERVACAO] WITH CHECK CHECK CONSTRAINT [FK_EV_AVALIACAOOBSERVACAO_EV_CLIENTE];

ALTER TABLE [dbo].[EV_AVALIACAOOBSERVACAO] WITH CHECK CHECK CONSTRAINT [FK_EV_AVALIACAOOBSERVACAO_EV_AVALIACAO];

ALTER TABLE [dbo].[EV_CLIENTE] WITH CHECK CHECK CONSTRAINT [FK_EV_CLIENTE_EV_ESCOLARIDADE];

ALTER TABLE [dbo].[EV_CLIENTE] WITH CHECK CHECK CONSTRAINT [FK_EV_CLIENTE_AspNetUsers];

ALTER TABLE [dbo].[EV_CLIENTE] WITH CHECK CHECK CONSTRAINT [FK_EV_CLIENTE_AD_ORGAOS];

ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH CHECK CHECK CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_NECESSIDADE];

ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH CHECK CHECK CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_INSCRICAO];

ALTER TABLE [dbo].[EV_CONTROLENECESSIDADE] WITH CHECK CHECK CONSTRAINT [FK_EV_CONTROLENECESSIDADE_EV_CLIENTE];

ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH CHECK CHECK CONSTRAINT [FK_EV_DIVULGACAOENVIOS_EV_EVENTO];

ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH CHECK CHECK CONSTRAINT [FK_EV_DIVULGACAOENVIOS_EV_DIVULGACAO];

ALTER TABLE [dbo].[EV_DIVULGACAOENVIOS] WITH CHECK CHECK CONSTRAINT [FK_EV_DIVULGACAOENVIOS_AD_ORGAOS];

ALTER TABLE [dbo].[EV_EVENTO] WITH CHECK CHECK CONSTRAINT [FK_EV_EVENTO_EV_TEMA];

ALTER TABLE [dbo].[EV_EVENTO] WITH CHECK CHECK CONSTRAINT [FK_EV_EVENTO_EV_LOCALEVENTO];

ALTER TABLE [dbo].[EV_EVENTODATAS] WITH CHECK CHECK CONSTRAINT [FK_EV_EVENTODATAS_EV_EVENTO];

ALTER TABLE [dbo].[EV_GRUPODEQUESTOES] WITH CHECK CHECK CONSTRAINT [FK_EV_GRUPODEQUESTOES_EV_RECURSOPROVA];

ALTER TABLE [dbo].[EV_INSCRICAO] WITH CHECK CHECK CONSTRAINT [FK_EV_INSCRICAO_EV_EVENTO];

ALTER TABLE [dbo].[EV_INSCRICAO] WITH CHECK CHECK CONSTRAINT [FK_EV_INSCRICAO_EV_CLIENTE];

ALTER TABLE [dbo].[EV_NECESSIDADE] WITH CHECK CHECK CONSTRAINT [FK_EV_NECESSIDADE_EV_TPNECESSIDADE];

ALTER TABLE [dbo].[EV_PROVAQUESTOES] WITH CHECK CHECK CONSTRAINT [FK_EV_PROVAQUESTOES_EV_GRUPODEQUESTOES];

ALTER TABLE [dbo].[EV_QUESTOESCORRECAO] WITH CHECK CHECK CONSTRAINT [FK_EV_QUESTOESCORRECAO_EV_GRUPODEQUESTOES];

ALTER TABLE [dbo].[EV_RECURSOPROVA] WITH CHECK CHECK CONSTRAINT [FK_EV_RECURSOPROVA_EV_RECURSOPROVA];

ALTER TABLE [dbo].[EV_SALALOCALPROVA] WITH CHECK CHECK CONSTRAINT [FK_EV_SALALOCALPROVA_EV_LOCALPROVA];


GO
PRINT N'Update complete.';


GO
