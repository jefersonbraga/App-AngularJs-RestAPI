"use strict";app.controller("ClienteController",["$scope","clienteService","NotyService","orgaoemissorService","ufService","orgaosService","escolaridadeService","municipioService","pluginsService",function(n,t,i,r,u,f,e,o,s){var c;s.init();n.codigo="Código";n.title="Cliente";n.tblData=[];n.orgaosEmissor=[];n.ufs=[];n.municipios=[];n.cliente={};n.informacoes="Informações";n.instituicao="Instituição";n.administrador=0;n.tab="tab1";n.orgaos=[];n.escolaridades=[];n.isEdit=!1;n.cpfvalid=!0;n.invalido="Inválido";c=function(n){var t=new Date(n);return[t.getDate(),t.getMonth()+1,t.getFullYear()].join("/")+" "+[t.getHours(),t.getMinutes()].join(":")};n.stepChanging=function(n,t){return $("#formCliente").parsley().whenValidate({group:"block"+t}),$("#formCliente").parsley().isValid("block"+t,!1)};n.confirmarSenha=function(){return n.cliente.Senha!==n.cliente.Senha2?!1:!0};n.showModal=function(t){t==="new"&&(n.cliente={},n.isEdit=!1);n.cliente.Senha2=n.cliente.Senha;document.getElementById("modal-cliente").style.display="block";$("#modal-cliente").removeClass().addClass("modal bounceInRight animated active");$(".header").removeClass("active");$(".modal").data("action",t);$("#formCliente").parsley().reset()};n.exitModal=function(){$("#modal-cliente").removeClass().addClass("modal bounceOut animated");$(".header").removeClass("preview active");$(".modal").data("action","none");n.isEdit=!1};n.Edit=function(t){n.$apply(function(){n.cliente=t;n.selected=t.Orgaoemissor});$("#name").val(n.cliente.Nome);n.isEdit=!0;n.showModal("edit")};n.ValidarCpf=function(t){var t=n.cliente.Cpf,r,f,o,u,i,e,s;if(t){if(t=t.replace(".",""),t=t.replace(".",""),t=t.replace("-",""),r=t,s=1,r.length<11)return!1;for(i=0;i<r.length-1;i++)if(r.charAt(i)!=r.charAt(i+1)){s=0;break}if(s)return!1;for(f=r.substring(0,9),o=r.substring(9),u=0,i=10;i>1;i--)u+=f.charAt(10-i)*i;if(e=u%11<2?0:11-u%11,e!=o.charAt(0))return!1;for(f=r.substring(0,10),u=0,i=11;i>1;i--)u+=f.charAt(11-i)*i;return(e=u%11<2?0:11-u%11,e!=o.charAt(1))?!1:!0}};n.ShowDetail=function(){var n=[],t;n.push('<div class="row"><div class="col-xs-3"><strong>Protocolo: <\/strong> aaaaaaaaaaaaaaa <\/div>');n.push('<div class="col-xs-3"><strong>Status: <\/strong> bbbbbbbbbbbbbbbbbbb <\/div>');n.push('<div class="col-xs-3"><strong>Tipo Atendimento: <\/strong> cccccccccccccccccccccccccccccccccc <\/div>');n.push('<div class="col-xs-3"><strong>Usuário Suporte: <\/strong> dddddddddddddddddddddddddd <\/div><\/div>');n.push('<div class="row"><div class="col-xs-3"><strong>Fabricante: <\/strong> eeeeeeeeeeeeeeeeeeeeeeeeee <\/div>');n.push('<div class="col-xs-3"><strong>Modelo: <\/strong> fffffffffffffffffffffffffffff <\/div>');n.push('<div class="col-xs-3"><strong>Ano Fabricação: <\/strong> ggggggggggggggggggg <\/div>');n.push('<div class="col-xs-3"><strong>Ano Modelo: <\/strong> hhhhhhhhhhhhhh <\/div><\/div>');n.push('<div class="row"><div class="col-xs-3"><strong>Placa: <\/strong> iiiiiiiiiiiiiiiiii <\/div>');n.push('<div class="col-xs-3"><strong>Chassi: <\/strong> jjjjjjjjjjjjjjjjjjjjjjjjj <\/div>');n.push('<div class="col-xs-3"><strong>Renavan: <\/strong> lllllllllllllllllllllllllllllllllll <\/div>');n.push('<div class="col-xs-3"><strong>Cor: <\/strong> mmmmmmmmmmmmmmmmmmmmmmmmmmmmm <\/div><\/div>');t=$(".detail-view td");t.append(n.join(""))};var l=function(){o.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.municipios=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar municipios!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})},a=function(){e.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.escolaridades=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar escolaridades!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})},v=function(){f.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.orgaos=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar orgaos!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})},y=function(){r.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.orgaosEmissor=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar orgaos emissor!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})},p=function(){u.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.ufs=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar UFs!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})},h=function(){t.GetAll(function(t){var f,r,u;if(t.status===200){if(f=jQuery.isEmptyObject(t.data[0]),f)return;n.tblData=t.data}else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);r===""&&(r="Ocorreu erro ao consultar clientes!");i.Noty("Erro",r,i.Type.Danger,!1,function(n){return n})}})};n.Save=function(){var r=$(".modal").data("action");r==="new"?t.Post(n.cliente,function(n){var r,t;if(n.status===200||n.status===201)i.Noty("Informação","Cadastro realizado com sucesso! ",i.Type.Success,!1,function(n){return n});else{r="";for(t in n.data)if(n.data.hasOwnProperty(t)){if(t==="$id")continue;r+=n.data[t]}i.Noty("Weventos ocorreu erro ao salvar registro favor contatar suporte do sistema!",r,i.Type.Danger,!1,function(n){return n})}}):r==="edit"&&t.GetById(n.cliente.Id,function(r){var e,u,f;if(r.status===200){if(!r.data){i.Noty("Alerta!","Não foi localizado o registro favor contate o suporte!",i.Type.Warning,!1,function(n){return n});return}if(e=angular.equals(n.cliente,r.data[0]),e){i.Noty("Informacao!","Não teve alterações no registro, não e possivel salvar.",i.Type.Info,!1,function(n){return n});return}t.Put(n.cliente,function(n){var t,r;if(n.status===200||n.status===201)i.Noty("Informação",n.data+" registro atualizado com sucesso! ",i.Type.Success,!1,function(n){return n}),h();else{t="";for(r in n.data)n.data.hasOwnProperty(r)&&(t+=n.data[r]);i.Noty("Weventos ocorreu erro ao atualizar registro favor contatar suporte do sistema!",t,i.Type.Danger,!1,function(n){return n})}})}else{u="";for(f in r.data)r.data.hasOwnProperty(f)&&(u+=r.data[f]);i.Noty("Erro",u,i.Type.Danger,!1,function(n){return n})}})};n.Delete=function(n){var r=n;i.Noty("Confirmacao","Deseja excluir este registro: "+r.Name+"? ",i.Type.Warning,!0,function(u){u&&t.Delete(r,function(t){var r,u;if(t.status===200||t.status===201)oTable.fnDeleteRow(n),i.Noty("Informacao","Registro excluido com sucesso!",i.Type.Success,!1,function(n){return n});else{r="";for(u in t.data)t.data.hasOwnProperty(u)&&(r+=t.data[u]);i.Noty("Weventos ocorreu erro ao excluir registro favor contatar suporte do sistema!",r,i.Type.Danger,!1,function(n){return n})}})})};n.Columns=[{field:"Id",title:"Id",sortable:!1,visible:!1},{field:"Nome",title:"Nome",sortable:!0},{field:"Email",title:"Email",sortable:!0},{field:"Rg",title:"Rg",sortable:!0},{field:"Orgaoemissor",title:"Orgao Emissor",sortable:!0},{field:"Ufemissor",title:"Uf Emissor",sortable:!0},{field:"Dtemissao",title:"Emissao",sortable:!0},{field:"Cpf",title:"Cpf",sortable:!0},{field:"Nacionalidade",title:"Nacionalidade",sortable:!0},{field:"Naturalidade",title:"Naturalidade",sortable:!1},{field:"Dtnascimento",title:"Nascimento",sortable:!0},{field:"Sexo",title:"Sexo",sortable:!0},{field:"Nomepai",title:"Nome Pai",sortable:!1},{field:"Nomemae",title:"Nome Mãe",sortable:!1},{field:"Cep",title:"Cep",sortable:!1},{field:"Endereco",title:"Endereço",sortable:!1},{field:"Bairro",title:"Bairro",sortable:!1},{field:"Numero",title:"Numero",sortable:!1,visible:!1},{field:"Complemento",title:"Complemento",sortable:!1},{field:"Cidade",title:"Cidade",sortable:!0},{field:"Estado",title:"Estado",sortable:!0},{field:"Telresidencial",title:"Tel. Residencial",sortable:!1},{field:"Telcomercial",title:"Tel. Comercial",sortable:!1},{field:"Telcelular",title:"Tel. Celular",sortable:!0},{field:"Senha",title:"Senha",sortable:!1},{field:"Cadadministracao",title:"Cad Administração",sortable:!0,visible:!1},{field:"Enviosenha",title:"Envio Senha",sortable:!1,visible:!1},{field:"Orgaotrabalhoid",title:"Orgão Trabalho",sortable:!1,visible:!1},{field:"Escolaridadeid",title:"Escolaridade",sortable:!1,visible:!1},{field:"Instituicao",title:"Instituição",sortable:!1},{field:"Dtconclusao",title:"Conclusão",sortable:!1},{field:"Dtregistro",title:"Registro",sortable:!1},{field:"Dtultimaalteracao",title:"Última Alteração",sortable:!1},{field:"Dtultimoacesso",title:"Último acesso",sortable:!1},{field:"Idantigo",title:"Antigo",sortable:!1,visible:!1},{field:"Idorgaoantigo",title:"Orgão Antigo",sortable:!1,visible:!1},{field:"Idescolaridadeantigo",title:"Escolaridade Antigo",sortable:!1,visible:!1},{field:"Qtdacesso",title:"Acesso",sortable:!1,visible:!1},{field:"Receberfeeds",title:"Receber Feeds",sortable:!1,visible:!1},];h();y();p();v();a();l()}]);